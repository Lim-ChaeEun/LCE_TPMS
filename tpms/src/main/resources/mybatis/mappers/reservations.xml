<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="com.lce.tpms.dao.ReservationDao">

	<insert id="insertReservation" parameterType="com.lce.tpms.vo.Reservation">
		insert into reservation
			(reservation_code, user_code, phone_code)
		values
    		('RV' || lpad(RESERVATION_SEQ.nextval, 4, 0), #{userCode}, #{phoneCode})
	</insert>
	
	<select id="userAlreadyReserveBefore"  parameterType="string" resultType="string">
		select 
			reservation_code
		from 
			reservation
		where 
			user_code = #{value}	
	</select>
	
	<select id="phoneAlreadyReserveBefore"  parameterType="string" resultType="string">
		select 
			reservation_code
		from 
			reservation
		where 
			phone_code = #{value}	
	</select>
	
	<select id="getReservationByCode"  parameterType="string" resultType="string">
		select 
			reservation_code
		from 
			reservation
		where 
			reservation_code = #{value}
	</select>
	
</mapper>